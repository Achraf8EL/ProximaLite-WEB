@page
@model ProximaLite.Web.Pages.Processes.DetailsModel

<h1>Process details</h1>

@if (Model.Process == null)
{
    <p>Process not found.</p>
    <p><a asp-page="Index">Back</a></p>
    return;
}

<h2>@Model.Process.Name</h2>
<p>@Model.Process.Description</p>
<p><strong>Created:</strong> @Model.Process.CreatedAt (UTC)</p>

<hr />

<h3>Steps</h3>

@if (Model.Process.Steps.Count == 0)
{
    <p>No steps yet.</p>
}
else
{
    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Duration (min)</th>
                <th>Yield</th>
                <th>Cost (€)</th>
            </tr>
        </thead>
        <tbody>
@foreach (var s in Model.Process.Steps.OrderBy(x => x.Id))
{
            <tr>
                <td>@s.Name</td>
                <td>@s.DurationMin</td>
                <td>@s.Yield</td>
                <td>@s.CostEuro</td>
            </tr>
}
        </tbody>
    </table>
}

<hr />

<h3>Add a step</h3>

<form method="post">
    <div>
        <label>Name</label>
        <input asp-for="NewStep.Name" />
        <span asp-validation-for="NewStep.Name"></span>
    </div>

    <div>
        <label>Duration (min)</label>
        <input asp-for="NewStep.DurationMin" type="number" min="0" />
    </div>

    <div>
        <label>Yield (0 to 1)</label>
        <input asp-for="NewStep.Yield" type="number" step="0.0001" min="0" max="1" />
    </div>

    <div>
        <label>Cost (€)</label>
        <input asp-for="NewStep.CostEuro" type="number" step="0.01" min="0" />
    </div>

    <button type="submit">Add step</button>
</form>

<p><a asp-page="Index">Back</a></p>
